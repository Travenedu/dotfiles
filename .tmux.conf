unbind r
bind r source-file ~/.tmux.conf

set -g default-terminal "tmux-256color"
set-option -sa terminal-features ',xterm-256color:RGB'

# Set prefix
set -g prefix C-a

# Set mouse
set -g mouse on
setw -g mode-keys vi

# Start windows and panes at 1, not 0
set -g base-index 1
set -g pane-base-index 1
set-window-option -g pane-base-index 1
set-option -g renumber-windows on
set -g detach-on-destroy off

# Allow for customizing tab names using bash precmd_functions
set-option -g allow-rename on

# split panes using | and -
bind - split-window -h
bind | split-window -v
unbind '"'
unbind %

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

# Easier and faster switching between next/prev window
bind C-p previous-window
bind C-n next-window

# Move status bar to the top
set-option -g status-position top

# Super useful when using "grouped sessions" and multi-monitor setup
setw -g aggressive-resize on

# Focus events enabled for terminals that support them
set -g focus-events on

# Increase tmux messages display duration from 750ms to 4s
set -g display-time 4000

# Address vim mode switching delay (http://superuser.com/a/252717/65504)
set -s escape-time 0

# Increase scrollback buffer size from 2000 to 50000 lines
set -g history-limit 50000

# Display Popups
bind C-y display-popup \
  -d "#{pane_current_path}" \
  -w 80% \
  -h 80% \
  -E "lazygit"

bind C-n display-popup -E 'bash -i -c "read -p \"Session name: \" name; tmux new-session -d -s \$name && tmux switch-client -t \$name"'

bind C-j display-popup -E "tmux list-sessions | sed -E 's/:.*$//' | grep -v \"^$(tmux display-message -p '#S')\$\" | fzf --reverse | xargs tmux switch-client -t"

bind C-z display-popup \
  -w 80% \
  -h 80% \
  -E 'nvim ~/.zshrc'

bind C-t display-popup \
  -d "#{pane_current_path}" \
  -w 75% \
  -h 75% \
  -E "zsh"

# Styling

# Status bar position, style, justification
set -g status-position top
set -g status-style "bg=#1E1E1E,fg=#585b70"
set -g status-justify absolute-centre

# Status left (session name, prefix indicator)
set -g status-left "#[bg=#1E1E1E,fg=#cdd6f4]#{?client_prefix,, #S }#[bg=#cba6f7,fg=#1E1E1E,bold]#{?client_prefix, #S ,}#[bg=#1E1E1E,fg=#9399b2]"

# Status right (still disabled by default, since @tmux-dotbar-right = false)
# Status right (system info)
set -g status-right "\
#[fg=#b4befe] #[fg=#cdd6f4]#([ #{pane_current_path} = $HOME ] && echo '~' || basename #{pane_current_path}) \
#[fg=#b4befe] #[fg=#cdd6f4]#(date +%d/%m) \
#[fg=#b4befe] #[fg=#cdd6f4]#(date +%l:%M%p) "

# Copy mode styling
set -g mode-style "bg=#b4befe,fg=#1A1D23"

# Window status separator (between tabs)
set-window-option -g window-status-separator " • "

# Window status styles
set -g window-status-style "bg=#1E1E1E,fg=#585b70"
set -g window-status-format " #W "

# Current window status format (active tab, with zoom icon if maximized)
set -g window-status-current-format "#[bg=#1E1E1E,fg=#cdd6f4] #W #[fg=#39BAE6,bg=#1E1E1E]#{?window_zoomed_flag,󰊓,}#[fg=#1E1E1E,bg=default]"

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
# set -g @plugin 'binoymanoj/tmux-minimal-theme'
# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

